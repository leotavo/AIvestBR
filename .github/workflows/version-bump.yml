name: Incrementar Vers√£o Python

on:
  push:
    branches:
      - main

jobs:
  bump-version:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout c√≥digo
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Configurar Git
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

      - name: Incrementar vers√£o
        run: |
          if [ ! -f VERSION ]; then echo "0.0.0" > VERSION; fi
          CURRENT_VERSION=$(cat VERSION)
          IFS='.' read -r -a parts <<< "$CURRENT_VERSION"
          MAJOR=${parts[0]}
          MINOR=${parts[1]}
          PATCH=${parts[2]}
          PATCH=$((PATCH + 1))
          NEW_VERSION="$MAJOR.$MINOR.$PATCH"
          echo "$NEW_VERSION" > VERSION
          echo "Vers√£o incrementada para $NEW_VERSION"

      - name: Commit e Push nova vers√£o
        run: |
          git add VERSION
          git commit -m "üîñ Incrementa vers√£o para $(cat VERSION)"
          git push origin main
